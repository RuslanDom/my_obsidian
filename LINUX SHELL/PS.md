#  Команда: ps
---
### Общее и Параметры
**ps** (process status) — программа в UNIX-системах, выводящая отчёт о работающих процессах.

По умолчанию выводит процессы текущего пользователя в текущем терминале.
Синтаксис команды ps очень просто: ps -[опция]. Однако опций у ps просто море, чтобы разобраться в них, мы разбили их на 2 группы:

- Опции выбора процессов для отображения;
- Опции работы с форматом вывода данных на экран.

Начнем с опций команды ps, помогающих выбрать нужные процессы для отображения их состояний. Вот список опций выбора процессов для отображения:

- -A, -e, (a) - выбрать все процессы;
- -a - выбрать все процессы, кроме фоновых;
- -d, (g) - выбрать все процессы, даже фоновые, кроме процессов сессий;
- -N - выбрать все процессы кроме указанных;
- -С - выбирать процессы по имени команды;
- -G - выбрать процессы по ID группы;
- -p, (p) - выбрать процессы PID;
- --ppid - выбрать процессы по PID родительского процесса;
- -s - выбрать процессы по ID сессии;
- -t, (t) - выбрать процессы по tty;
- -u, (U) - выбрать процессы пользователя.
---
### Осноные
Чтобы просмотреть все запущенные процессы, используйте одну из следующих команд:
```shell
ps -e
или
ps -A
```
Чтобы показать все процессы, кроме лидеров сессии, выполните:
```shell
ps -d
```
Вы можете инвертировать вывод с помощью переключателя -N. Например, если вы хотите вывести только лидеров сеансов, выполните следующую команду:
```shell
ps -d -N
```
Если вы хотите увидеть только процессы, связанные с этим терминалом, выполните:
```shell
ps T
```
Если вы хотите просмотреть все работающие (running) процессы, используя следующую команду:

```shell
ps r
```
### Выбор конкретных процессов
Например, если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду:
```shell
ps -p <PID>
```
Вы можете выбрать несколько процессов, указав несколько идентификаторов процесса следующим образом:

```shell
ps -p "<pid1> <pid2>"
or
ps -p <pid1>,<pid2>
```

Скорее всего, вы не будете знать идентификатор процесса, и его легче искать по команде. Для этого используйте следующую команду:
```shell
ps -C <команда>
Пример:
ps -C nginx
```

Если вы хотите найти все процессы, выполняемые конкретным пользователем, выполните следующую команду, указав имя пользователя:
```shell
ps -U <username>
Пример:
ps -U ruslan
```

### Сохранить список процессов в текстовый файл

```shell
ps aux > output_file.txt
```

### Дерево процессов pstree
```shell
-a, --arguments     показывать аргументы командной строки
  -A, --ascii         использовать ASCII-символы для рисования линий
  -c, --compact-not   не сжимать одинаковые поддеревья
  -C, --color=ТИП     раскрашивать процессы по атрибуту
                      (возраст)
  -g, --show-pgids    показывать идентификаторы групп процесса;
                      включает -c
  -G, --vt100         использовать символы рисования линий от VT100
  -h, --highlight-all подсветить текущий процесс и его предков
  -H PID,
  --highlight-pid=PID подсветить процесс PID и его предков
  -l, --long          не обрезать длинные строки
  -n, --numeric-sort  сортировать вывод по PID
  -N тип,
  --ns-sort=тип       сортировать по типу пространства имён
                      (cgroup, ipc, mnt, net, pid, time, user, uts)
  -p, --show-pids     показывать идентификаторы процессов (PID); включает -c
  -s, --show-parents  показывать родителей выбранного процесса
  -S, --ns-changes    показывать переходы пространств имён
  -t, --thread-names  показывать полные имена нитей
  -T, --hide-threads  скрывать нити, показывать только процессы
  -u, --uid-changes   показывать переходы идентификаторов пользователей
  -U, --unicode       использовать символы рисования линий UTF-8 (Юникод)
  -V, --version       показать информацию о версии
  -Z, --security-context
                      показывать атрибуты безопасности

  PID                 начинать от указанного PID; по умолчанию 1 (init)
  ПОЛЬЗОВАТЕЛЬ        показать только дерево процессов указанного пользовател
```

```shell
pstree -snAh
```

Вывод: 
```shell
systemd-+-systemd-journal
        |-systemd-udevd
        |-systemd-resolve
        |-systemd-timesyn---{systemd-timesyn}
        |-accounts-daemon---3*[{accounts-daemon}]
        |-avahi-daemon---avahi-daemon
        |-bluetoothd
        |-cron
        |-dbus-daemon
        ...
```

По конкретному процессу 
```shell
pstree -p <PID>
```

### Примеры
Получает все процессы формат (размер, PID, пользователь) и сортирует по кол-ву потребляемой памяти с реверсом (от большего к меньшему)
```shell
ps -A -o size,pid,user | sort -rn -k1
```

---

## Команда: wc он же"туалет" Word Count (Счетчик слов)

Используется только для одного файла или для разбора стандартного ввода через конвейер, wc также может подсчитывать и суммировать несколько файлов одновременно. Три основных флага wc — это -w (подсчет слов), -c (подсчет символов) и -l (подсчет строк).

```shell
wc -l /etc/hosts*
Результат:
  9 /etc/hosts
  10 /etc/hosts.allow
  17 /etc/hosts.deny
  36 итого
```