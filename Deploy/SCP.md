# Синтаксис и использование утилиты SCP

```shell
$ scp options user@хост1:файл user2@хост2:file
```

Это общий синтаксис утилиты, который необходимо использовать при вводе команды в Терминале, чтобы она выполнилась успешно и обработала ваш запрос. Как видно, ничего в этом трудного нет, однако нужно подробнее разобрать доступные опции (они же **options** в строке синтаксиса):

- **-1** – в этом случае используется протокол SSH1;
    
- **-2** – то же самое, но с версией SSH2;
    
- **-B** – активация пакетного режима, когда нужно передать сразу пачку файлов;
    
- **-C** – использовать сжатие при отправке;
    
- **- l** – установка ограничения в кбит/сек (значение задается пользователем вручную);
    
- **-o** – добавление опций SSH;
    
- **-p** – сохранение времени изменений файлов;
    
- **-r** – использование рекурсивного копирования папок;
    
- **-v** – переход в более развернутый режим.
    

Некоторые из перечисленных опций, возможно, пригодятся вам в работе, поэтому рекомендую запомнить их или где-то сохранить с понятными для вас пометками, чтобы знать, когда и что использовать. Далее я развернуто расскажу о популярных опциях и их практическом применении.

### Выбор пользователя
```shell
scp /home/user/file root@timeweb:/root/
```

### Копирование директории

Если вы ознакомились с описанным выше списком опций, то уже знаете, что SCP предлагает передачу целых директорий с использованием опции **-r**. В таком случае строка в Терминале обретает вид порт указывается -P 2022 :
```shell
scp -P 2022 /home/user/readme.txt admin@185.119.59.245:/home/admin/directory/templates/readme.txt
```

```shell
ruslan@ruslan-CoreBook-X:~$ scp -P 2022  /home/ruslan/PycharmProjects/Programming/Skillbox/Module_8_Деплой_на_linux/new_year_application/templates/readme.txt admin@185.119.59.245:/home/admin/workspace/new_year_application/templates/readme.txt

```

```shell
scp -r /home/user/photos root@timeweb:/root/
```

Если нужно передать все файлы из определенной папки, замените строку на следующую:
```shell
scp -r /home/user/photos/* root@timeweb:/root/
```
Только не забудьте изменить путь к файлу и место назначения. Как видно, добавилась только косая черта после последней директории и значок *****, обозначающий копирование всех элементов.

### Копирование с сервера на компьютер

Предыдущие три команды позволяли передавать файлы с локального компьютера на удаленный сервер, однако утилита поддерживает и обратное направление. В таком случае написание команды в консоли немного меняется и обретает примерно такой вид:
```shell
scp root@timeweb:/root/file /home/user/
```

Мы просто поменяли местами пути в команде. Вы можете использовать все те же опции, осуществляя копирование с разными атрибутами или передавая целые каталоги.

Если файлы передаются с одного удаленного сервера на другой, то их адреса указываются следующим образом:
```shell
scp root@timeweb:/home/root/index.html root@timeweb:/home/root/www/
```
***При вводе команд обращайте внимание на одну деталь: путь к директории, в которую вы копируете данные, обязательно должен заканчиваться косой чертой, иначе произойдет перезапись файлов, и вы потеряете данные, хранящиеся в конечной папке.***

























