# Базовые команды в linux

## Получить справку по команде 

	<команда> --help

Пример

	date --help

## Запуск файла с директории

	/usr/bin/firefox
## Путь до текущей директории

	pwd

## Содержимое директорий
### Текущая
	ls
или

	ls .
### На уровень выше
	ls ..

### Посмотреть любую директорию по пути

	ls -l <путь до файла(папки)>

## Перемещение среди директорий

### Абсолютный путь

	cd /home/ruslan/Documents

### Относительный

	cd Documents
### Переход на директорию уровнем выше

	cd ..
## Создание папки и файла
### Создать папку

	mkdir <имя файла>

### Создать файл

	touch <имя файла>

### Открыть файл

	nano <имя файла>

### Копировать файл
```shell
cp -a /source /target
```
/source - источник
/target - папку куда скопировать
	-a    ключ добавит копирование всех атрибутов, прав и добавит рекурсию
	-r    ключ рекурсивно копирующий без точного воспроизведения прав доступа
### Удалить файл

	rm <имя файла>

### Удалить папку

	rmdir <название папки> 

# Специальные команды

## Создание, проверка и удаление пользователей
### Создание нового пользователя 
```shell
ruslan@PC:~$ sudo adduser <name>
```
### **Изменение пароля пользователя**:
```shell
sudo passwd имя_пользователя
```

### Проверка списка пользователей
```shell
cat /etc/passwd
```
Это может быть полезно, если вы хотите знать, существует ли конкретное имя пользователя в системе:
```shell
ruslan@PC:~$ getent passwd | grep johndoe
```
Если вы просто хотите , чтобы перечислить все имена пользователей без какой — либо дополнительной информации, вы можете использовать CompGen команду с **-u** опцией.
```shell
ruslan@PC:~$ compgen -u
```

### Добавление нового пользователя в группу
```shell
sudo usermod -aG имя_группы имя_пользователя
```
**Пример**. Добавить пользователя в группу sudo для получения административных прав:
```shell
sudo usermod -aG sudo имя_пользователя
```

### **Пример смены имени пользователя:**
```shell
sudo usermod -l новое_имя старое_имя
```
**Смена домашней директории**:
```shell
sudo usermod -d /home/новое_имя -m новое_имя
```
**Изменение групп пользователя:**
```shell
sudo usermod -aG группа имя_пользователя
```


### Удаление пользователя
```shell
ruslan@PC:~$ sudo deluser <name>
```


## Использование команды ps
Синтаксис команды ps очень просто: ps -[опция]. Однако опций у ps просто море, чтобы разобраться в них, мы разбили их на 2 группы:

- Опции выбора процессов для отображения;
- Опции работы с форматом вывода данных на экран.

Начнем с опций команды ps, помогающих выбрать нужные процессы для отображения их состояний. Вот список опций выбора процессов для отображения:

- -A, -e, (a) - выбрать все процессы;
- -a - выбрать все процессы, кроме фоновых;
- -d, (g) - выбрать все процессы, даже фоновые, кроме процессов сессий;
- -N - выбрать все процессы кроме указанных;
- -С - выбирать процессы по имени команды;
- -G - выбрать процессы по ID группы;
- -p, (p) - выбрать процессы PID;
- --ppid - выбрать процессы по PID родительского процесса;
- -s - выбрать процессы по ID сессии;
- -t, (t) - выбрать процессы по tty;
- -u, (U) - выбрать процессы пользователя.
Чтобы просмотреть все запущенные процессы, используйте одну из следующих команд:
```shell
ps -e
или
ps -A
```
Чтобы показать все процессы, кроме лидеров сессии, выполните:
```shell
ps -d
```
Вы можете инвертировать вывод с помощью переключателя -N. Например, если вы хотите вывести только лидеров сеансов, выполните следующую команду:
```shell
ps -d -N
```
Если вы хотите увидеть только процессы, связанные с этим терминалом, выполните:
```shell
ps T
```
Если вы хотите просмотреть все работающие (running) процессы, используя следующую команду:

```shell
ps r
```
#### Выбор конкретных процессов
Например, если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду:
```shell
ps -p <PID>
```
Вы можете выбрать несколько процессов, указав несколько идентификаторов процесса следующим образом:

```shell
ps -p "<pid1> <pid2>"
or
ps -p <pid1>,<pid2>
```

Скорее всего, вы не будете знать идентификатор процесса, и его легче искать по команде. Для этого используйте следующую команду:
```shell
ps -C <команда>
Пример:
ps -C nginx
```

Если вы хотите найти все процессы, выполняемые конкретным пользователем, выполните следующую команду, указав имя пользователя:
```shell
ps -U <username>
Пример:
ps -U ruslan
```

## Команда: grep

Команда `grep` (global regular expression print) — это инструмент в Linux и Unix, который помогает вам искать определенный текст в файлах. Вы можете использовать его для поиска слов, фраз или шаблонов в одном или нескольких файлах, что упрощает поиск и управление информацией.

Пример: 
Эта команда ищет строку `“error”`в `/var/log/syslog`файле.
```shell
grep "error" /var/log/syslog
```

Для поиска строки во всех файлах каталога и его подкаталогов используйте `-r`опцию:

```shell
grep -r "search_string" /path/to/directory
```

Для выполнения поиска без учета регистра используйте `-i`опцию: 

```shell
grep -i "search_string" filename
```

Чтобы подсчитать количество появлений шаблона, используйте `-c`опцию:

```shell
grep -c "search_string" filename
```

Для поиска шаблона в нескольких файлах можно использовать подстановочные знаки:
Эта команда выполняет поиск `“error”`во всех файлах .log в `/var/log/`каталоге.

```shell
grep "error" /var/log/*.log
```

### Параметры grep

`grep`также поставляется с различными опциями для настройки его поведения:

1. `-i`: Игнорировать различия в регистре.
2. `-v`: Инвертируйте совпадение, чтобы выбрать несовпадающие строки.
3. `-c`: Подсчитайте количество совпадающих строк.
4. `-l`: Список имен файлов, содержащих совпадение.
5. `-L`: Список имен файлов, не содержащих совпадений.
6. `-n`: Добавляйте к каждой строке вывода номер строки.
7. `-H`: Распечатать имя файла для каждого совпадения.
8. `-r`или `-R`: Прочитать все файлы в каждом каталоге рекурсивно.
9. `-w`: Сопоставлять только целые слова.
10. `-x`: Сопоставлять только целые строки.
11. `-E`: Используйте расширенные регулярные выражения (ERE).
12. `-F`: Интерпретировать шаблон как список фиксированных строк (fgrep).
13. `-q`: Тихо, ничего не писать в стандартный вывод.

## Команда: wc он же"туалет" Word Count (Счетчик слов)

Используется только для одного файла или для разбора стандартного ввода через конвейер, wc также может подсчитывать и суммировать несколько файлов одновременно. Три основных флага wc — это -w (подсчет слов), -c (подсчет символов) и -l (подсчет строк).

```shell
wc -l /etc/hosts*
Результат:
  9 /etc/hosts
  10 /etc/hosts.allow
  17 /etc/hosts.deny
  36 итого
```
## Поиск пути до программы

	whereis <name>

	which <name>

	whereis Proxychains
## Список запущенных процессов

Запуск процессов запущенных пользователем

	ps

	jobs

Запуск всех запущенных процессов

	ps -A

### Сохранить список процессов в текстовый файл

	ps aux > output_file.txt

### Аналогичная команда top

	top

### Команда lsof

Посмотреть все процессы запущенные на порту (пример 5000)

	lsof -i :5000

Получить только PID этих процессов

	 lsof -i :5000 -t

## Запуск и остановка программ

### Запуск в foreground

	python example.py


### Запуск в background

	python example.py &

	python empty_page.py > /dev/null &

Направит 2 поток stderr в 1 stdout и 1 в /dev/nul

	 python empty_page.py 2>&1 > /dev/null &

Направит оба потока в /dev/null

	python empty_page.py & > /dev/nul &

### Приостановить процесс и восстановить

Комбинация клавиш `ctrl + Z` для того чтобы приостановить процесс

Команда `fg` позволяет продолжить выполнение процесса в foreground

	fg

Команда `bg` позволяет продолжить выполнение процесса в background

	bg
	
### Убить процесс kill
Указать pid

	kill <PID>

Указать номер процесса [1]

	kill %**1**

## Посмотреть порт

`ss -tulpn | grep 9150`
`ss -tulpn | grep 8080`

`ss -tulpn` - все порты

## Редактор XED

`sudo xed <name file>`
`sudo xed /etc/tor/torrc`

## Редактор NANO

`sudo nano <name file>`
`sudo nano  /etc/tor/torrc`

## Утилиты systemctl и journalctl
Это **мощные инструменты для управления службами и анализа журналов в Linux**. Они позволяют эффективно контролировать процессы и анализировать события в системе.systemctl

`systemctl status tor`
`journalctl -xefu tor@default.service`

### Добавить в автозагрузку и убрать из автозагрузки

`sudo systemctl enable <filename>` - добавить

`sudo systemctl disable <filename>` - убрать
## Сочетания клавиш

`ctrl + R` - поиск ранее вводимых команд
`ctrl + F` - поиск файлов и директорий
`ctrl + Q` - выход из файла

## Утилита tail

Команда tail **записывает в стандартный поток вывода содержимое файла, заданного в параметре Файл, начиная с указанной позиции**. Будут показаны последние 10 строк файла accounts. Команда tail будет продолжать показывать новые строки по мере их добавления к файлу accounts. Для окончания просмотра нажмите клавиши Ctrl-C.

```shell
ruslan@PC:~/Programming/Skillbox/Module_6_Основы_деббагинга$ tail -f banking.log 
INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
INFO:werkzeug:Press CTRL+C to quit
INFO:bank_id:Работник с ID 1: Иванов Иван Иванович
INFO:werkzeug:127.0.0.1 - - [08/Dec/2024 11:35:42] "GET /bank_api/1/1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [08/Dec/2024 11:35:42] "GET /favicon.ico HTTP/1.1" 404 -
INFO:bank_id:Работник с ID 1: Иванов Иван Иванович
INFO:werkzeug:127.0.0.1 - - [08/Dec/2024 11:39:35] "GET /bank_api/1/1 HTTP/1.1" 200 -

```

Ключ -f и -F
-f, --follow[={name|descriptor}]
                           выводить поступающие данные по мере роста файла;
                           при отсутствии параметра используется «descriptor»
-F                       эквивалент --follow=name --retry

# Snap
## Установка пакетов 
Обновляем пакеты
```shell
sudo apt update
```
Устанавливаем нужный пакет
```shell
sudo snap install <name>
```

## Удаление пакетов
```shell
sudo snap remove <name>
```

# source
В Linux команда source — встроенная команда оболочки, которая **считывает и выполняет содержимое файла в текущей оболочке**. Считываемые файлы обычно содержат список команд, переданных интерпретатору для чтения и выполнения. Исходная команда не имеет параметров, и аргументом является только файл.

**Пример**:
```shell
source venv/bin/activate
```

# touch
**Команда touch** в операционных системах Unix и **Linux** используется для создания новых файлов или обновления временных меток существующих файлов. Она выполняет следующие задачи: Создание новых файлов: **touch** позволяет создавать пустые файлы или файлы с заданным содержимым.

# 




# 